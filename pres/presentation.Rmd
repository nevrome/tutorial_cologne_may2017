---
title: "recexcavAAR and far beyond..."
subtitle: "Anregungen rund um R, DataScience und Archäologie"
author: "Clemens Schmid"
date: "17. Mai 2017"
fontsize: 9pt
header-includes:
   - \usepackage{menukeys}
output:
  beamer_presentation:
    theme: "metropolis"
fig_caption: yes
---

## Tutorial

\begin{columns}
\begin{column}{0.4\textwidth}

\begin{figure}[h]
\centering
\includegraphics[scale=0.25]{images/tree.png}
\caption{Inhaltsbaum}
\end{figure}

\end{column}
\begin{column}{0.5\textwidth}

\begin{itemize}
  \item R Pakete
  \item 3D plots in R
  \item recexcavAAR
  \item tidyverse
  \item Reports
\end{itemize}

\begin{quote}
A step to help you slow down - put your fork/spoon down between bites and take a sip of water before picking them up for the next bite. 

-- reddit user \textbf{angelforhirex} im Thread "I want to learn how to eat smaller portions"
\end{quote}

\end{column}
\end{columns}

# R Pakete

## R Pakete

http://r-pkgs.had.co.nz/

## R Pakete

1. Paket anlegen

```{r, eval=FALSE}
devtools::create("~/expack")
```

2. RStudio: In das entstandene Projekt wechseln

3. Paket bauen und installieren: \keys{\ctrl + \shift + B}

```{r, eval=FALSE}
devtools::build()
devtools::install()
library(expack)
```

4. Fleischbeschau!

```{r, eval=FALSE}
help(package="expack")
```

## R Pakete

5. Beispieldaten schaufeln 

Alles von 

https://github.com/nevrome/tutorial_cologne_may2017/tree/master/data

nach \emph{home/user/expack/data/}

6. Paket bauen: \keys{\ctrl + \shift + B}

7. Beispieldaten ansehen

```{r, eval=FALSE}
trench

```

# 3D plots in R

## 3D plots in R

Graphic Engines vs. Javascript

rgl <-> plotly 

## 3D plots in R

1. neues R-Skript \emph{~/expack/R/dreiD.R} anlegen

2. coole Funktion schreiben

```{r, eval=FALSE, size = "tiny"}
coolplot <- function(points_df, type = "p"){
  rgl::plot3d(
    points_df$x, points_df$y, points_df$z,
    type = type,
    xlab = "x", ylab = "y", zlab = "z",
    ...
  )
}
```

3. Namen der Funktion `coolplot` exportieren, indem man \emph{~/expack/NAMESPACE} editiert

```{NAMESPACE}
export(coolplot)
```

## 3D plots in R

4. Paket \textbf{rgl} als Voraussetzung des Pakets definieren, indem man \emph{~/expack/DESCRIPTION} editiert

```{dcf}
...
Description: What the package does (one paragraph).
Imports:
  rgl (>= 0.98.1)
Depends: R (>= 3.3.3)
...
```

5. Paket neu bauen: \keys{\ctrl + \shift + B}

6. Ausprobieren!

```{r, eval=FALSE}
coolplot(trench, type = "l")
coolplot(sherds, type = "p", add = TRUE)
```

## 3D plots in R

7. noch eine coole Funktion schreiben

```{r, eval=FALSE}
coolpicture <- function(image, position) {
  rgl::show2d( { par(mar = rep(0, 4))
                 plot( 0:1, 0:1, type = "n", ann = FALSE,
                       axes = FALSE, xaxs = "i", yaxs = "i" )
                 rasterImage(image, 0, 0, 1, 1)
                },
    x = position$x, y = position$y, z = position$z
  )
}
```

8. Namen der neuen Funktion exportieren

```{NAMESPACE}
export(coolpicture)
```

9. Ausprobieren!

```{r, eval=FALSE}
coolplot(trench, type = "l")
coolpicture(Nprofile, Nprofile_corners)
```

# recexcavAAR

## recexcavAAR

## recexcavAAR

# tidyverse

## tidyverse

## tidyverse

# Reports 

## Reports

## Reports

# Abschließende Gedanken

## Abschließende Gedanken

* Das ist **kein** produktionsfertiges R-Paket. Wir haben einige wichtige Aspekte ausgelassen: 
    * Dokumentation!
    * korrekte Datenimplementierung
    * Tests
    * ...
* Aber: Wir haben einige coole Zusammenhänge berührt!
    * Paketentwicklung
    * 3D plots
    * **tidyverse**
    * RMarkdown
* recexcavAAR, mortAAR, quantAAR... **ISAAK** ist offen für externe Mitarbeit!

https://isaakiel.github.io/